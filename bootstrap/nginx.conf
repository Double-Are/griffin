worker_processes 16;

events {
  use epoll;
  accept_mutex on;
  worker_connections 2048;
}

http {
  server {
    listen 80;

    location / {
      proxy_pass http://127.0.0.1:8765;
    }

    location /p2p {
      proxy_pass http://127.0.0.1:8766/p2p/<%= ENV["LIBP2P"] >;
    }

    location /api {
      proxy_pass http://127.0.0.1:8767;
    }
  }
}
